---
description: アーキテクチャマップ参照・更新ルール（構造把握のための必読）
alwaysApply: true
---

# Architecture Map 運用ルール

このリポジトリでは `architecture-map.md` を、コードベース理解の「一次情報（Source of Truth）」として扱います。

## 1. 必ず最初に読む

新しい作業を始める前に、**必ず** `architecture-map.md` を読んで次を把握してください。

- 入口（エントリポイント）がどこか
- どのディレクトリ／ファイルが何を担当しているか
- 主要なデータフロー（起動→プレイ→結果）と依存関係
- 変更を入れるべき場所と、触ってはいけない境界（例: `src/romaji.ts` の純粋ロジック性）

## 2. 構造変更があったら更新する

次のいずれかに該当する変更を行った場合、`architecture-map.md` を更新してください。

- **新しいディレクトリや主要モジュールの追加**
- **エントリポイントの追加／変更**
	- 例: `index.html` の構造、`src/main.ts` の初期化フロー、ビルド/実行導線
- **ゲームの主要フローの変更**
	- 例: 入力→判定→スコア計算、スポーン規則、終了条件、結果表示
- **データ定義やデータの正（Source of Truth）の変更**
	- 例: `src/data/sushi.yaml` のスキーマ変更、検証ルール変更
- **CI / 検証ルールの追加・変更**
	- 例: `Makefile`、`scripts/*` のチェック追加
- **主要ファイルのリネーム／責務移動**

## 3. 更新時の注意（フォーマット）

- 既存の章立て（目的 / 構成 / フロー / ルール / CI）を維持し、必要な箇所だけを追記・修正してください
- 「どのファイルが何を担当しているか」を、パス付きで明確に書いてください
- ルールが増えた場合は「実装ルール」セクションに追記してください

## 4. パス表記の約束

- パスはリポジトリルート相対で記述（例: `src/main.ts`, `src/data/sushi.yaml`, `scripts/check_sushi_data.mjs`）
